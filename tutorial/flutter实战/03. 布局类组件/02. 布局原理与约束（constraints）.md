# å¸ƒå±€åŸç†ä¸çº¦æŸï¼ˆconstraintsï¼‰

## ç›®å½•

1. BoxConstraints
2. ConstrainedBox
3. SizedBox
4. å¤šé‡é™åˆ¶
5. UnconstrainedBox
6. å…¶å®ƒçº¦æŸç±»å®¹å™¨

### å°ºå¯¸é™åˆ¶ç±»å®¹å™¨
ç”¨äºé™åˆ¶å®¹å™¨å¤§å°ã€‚
#### ç±»å‹
1. ConstrainedBox (çº¦æŸç›’å­)
2. SizedBox (å°ºå¯¸ç›’å­)
3. UnconstrainedBox (æœªçº¦æŸç›’å­)
4. AspectRatio (å®½é«˜æ¯”)
5. ...

### å¸ƒå±€æ¨¡å‹
#### ç±»å‹
1. åŸºäº <font color=#dea32c>**RenderBox**</font> çš„ç›’æ¨¡å‹å¸ƒå±€ã€‚
2. åŸºäº <font color=#dea32c>**Sliver**</font> ( RenderSliver ) <font color=#00a6ac>**æŒ‰éœ€åŠ è½½**</font>åˆ—è¡¨å¸ƒå±€ã€‚

#### å¸ƒå±€æµç¨‹
1. ä¸Šå±‚ç»„ä»¶å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’çº¦æŸï¼ˆconstraintsï¼‰æ¡ä»¶ã€‚
2. ä¸‹å±‚ç»„ä»¶ç¡®å®šè‡ªå·±çš„å¤§å°ï¼Œç„¶åå‘Šè¯‰ä¸Šå±‚ç»„ä»¶ã€‚
3. ä¸Šå±‚ç»„ä»¶ç¡®å®šä¸‹å±‚ç»„ä»¶ç›¸å¯¹äºè‡ªèº«çš„åç§»å’Œç¡®å®šè‡ªèº«çš„å¤§å°ã€‚

> æ¯”å¦‚ï¼Œçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„çº¦æŸæ˜¯â€œæœ€å¤§å®½é«˜ä¸èƒ½è¶…è¿‡100ï¼Œæœ€å°å®½é«˜ä¸º0â€ï¼Œå¦‚æœæˆ‘ä»¬ç»™å­ç»„ä»¶è®¾ç½®å®½é«˜éƒ½ä¸º200ï¼Œåˆ™å­ç»„ä»¶æœ€ç»ˆçš„å¤§å°æ˜¯100*100ã€‚

### ç›’æ¨¡å‹å¸ƒå±€ç»„ä»¶
1. ç»„ä»¶å¯¹åº”çš„æ¸²æŸ“å¯¹è±¡éƒ½ç»§æ‰¿è‡ª RenderBox ç±»ã€‚
2. åœ¨å¸ƒå±€è¿‡ç¨‹ä¸­çˆ¶çº§ä¼ é€’ç»™å­çº§çš„çº¦æŸä¿¡æ¯ç”± BoxConstraints æè¿°ã€‚

***

## BoxConstraints

ç›’æ¨¡å‹å¸ƒå±€è¿‡ç¨‹ä¸­ï¼Œçˆ¶æ¸²æŸ“å¯¹è±¡ä¼ é€’ç»™å­æ¸²æŸ“å¯¹è±¡çš„çº¦æŸä¿¡æ¯ã€‚

``` dart
/// å­ç»„ä»¶å¤§å°éœ€è¦åœ¨çº¦æŸçš„èŒƒå›´å†…
const BoxConstraints({
  this.minWidth = 0.0, //æœ€å°å®½åº¦
  this.maxWidth = double.infinity, //æœ€å¤§å®½åº¦
  this.minHeight = 0.0, //æœ€å°é«˜åº¦
  this.maxHeight = double.infinity //æœ€å¤§é«˜åº¦
})
```

### ä¾¿æ·æ„é€ å‡½æ•°
* BoxConstraints.tight(Size size)ï¼šç”Ÿæˆå›ºå®šå®½é«˜çš„é™åˆ¶ã€‚
* BoxConstraints.expand()ï¼šç”Ÿæˆä¸€ä¸ªå°½å¯èƒ½å¤§çš„ç”¨ä»¥å¡«å……å¦ä¸€ä¸ªå®¹å™¨çš„BoxConstraintsã€‚
* ...

***

## ConstrainedBox

ç”¨äºå¯¹å­ç»„ä»¶æ·»åŠ é¢å¤–çš„çº¦æŸã€‚

> ä¾‹å¦‚ï¼Œæƒ³è®©å­ç»„ä»¶çš„æœ€å°é«˜åº¦æ˜¯80åƒç´ ï¼Œå¯ä»¥ä½¿ç”¨const BoxConstraints(minHeight: 80.0)ä½œä¸ºå­ç»„ä»¶çš„çº¦æŸã€‚

### ç¤ºä¾‹
``` dart
/// å®šä¹‰ä¸€ä¸ªçº¢è‰²èƒŒæ™¯çš„box
Widget redBox = DecoratedBox(
  decoration: BoxDecoration(color: Colors.red),
);
```
``` dart
ConstrainedBox(
  constraints: BoxConstraints(
    minWidth: double.infinity, /// å®½åº¦å°½å¯èƒ½å¤§
    minHeight: 50.0 /// æœ€å°é«˜åº¦ä¸º50åƒç´ 
  ),
  child: Container(
    /// è™½ç„¶å°†Containerçš„é«˜åº¦è®¾ç½®ä¸º5åƒç´ ï¼Œä½†æ˜¯æœ€ç»ˆå´æ˜¯50åƒç´ 
    height: 5.0, 
    child: redBox ,
  ),
)
```

![](img/ef642a8f.png)

***

## SizedBox
ç”¨äºç»™å­å…ƒç´ æŒ‡å®šå›ºå®šçš„å®½é«˜
``` dart
SizedBox(
  width: 80.0,
  height: 80.0,
  child: redBox
)
```
![](img/500767be.png)

å®é™…ä¸ŠSizedBoxåªæ˜¯ConstrainedBoxçš„ä¸€ä¸ªå®šåˆ¶ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡<font color=#dea32c>**RenderConstrainedBox**</font>æ¥æ¸²æŸ“çš„ï¼ˆcreateRenderObject()æ–¹æ³•éƒ½è¿”å›çš„æ˜¯ä¸€ä¸ªRenderConstrainedBoxï¼‰ã€‚
``` dart
/// ç­‰ä»·ä»£ç 
ConstrainedBox(
  /// BoxConstraints(minHeight: 80.0,maxHeight: 80.0,minWidth: 80.0,maxWidth: 80.0)
  constraints: BoxConstraints.tightFor(width: 80.0,height: 80.0),
  child: redBox, 
)
```

***

## å¤šé‡é™åˆ¶

ğŸ¤” å¦‚æœæŸä¸€ä¸ªç»„ä»¶æœ‰å¤šä¸ªçˆ¶çº§ConstrainedBoxé™åˆ¶ï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šæ˜¯å“ªä¸ªç”Ÿæ•ˆï¼Ÿ

``` dart
ConstrainedBox(
  constraints: BoxConstraints(
    minWidth: 60.0, 
    minHeight: 60.0 /// ç”Ÿæ•ˆ
    ), //çˆ¶
  child: ConstrainedBox(
    constraints: BoxConstraints(
      minWidth: 90.0, /// ç”Ÿæ•ˆ
      minHeight: 20.0
      ),//å­
    child: redBox,
  ),
)
```

![](img/8e3182e5.png)

``` dart
ConstrainedBox(
  constraints: BoxConstraints(
    minWidth: 90.0, /// ç”Ÿæ•ˆ
    minHeight: 20.0 
    ),
  child: ConstrainedBox(
    constraints: BoxConstraints(
      minWidth: 60.0, 
      minHeight: 60.0 /// ç”Ÿæ•ˆ
      ),
    child: redBox,
  )
)
```
![](img/d3f3a62e.png)

### æ€»ç»“
æœ‰å¤šé‡é™åˆ¶æ—¶ï¼Œå¯¹äºminWidthå’ŒminHeightæ¥è¯´ï¼Œæ˜¯å–çˆ¶å­ä¸­ç›¸åº”æ•°å€¼è¾ƒå¤§çš„ã€‚å®é™…ä¸Šï¼Œåªæœ‰è¿™æ ·æ‰èƒ½ä¿è¯çˆ¶é™åˆ¶ä¸å­é™åˆ¶ä¸å†²çªã€‚

***

## UnconstrainedBox
UnconstrainedBox çš„å­ç»„ä»¶å°†ä¸å†å—åˆ°çº¦æŸï¼Œå¤§å°å®Œå…¨å–å†³äºè‡ªå·±ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¾ˆå°‘ä¼šç›´æ¥ä½¿ç”¨æ­¤ç»„ä»¶ï¼Œä½†åœ¨"å»é™¤"å¤šé‡é™åˆ¶çš„æ—¶å€™ä¹Ÿè®¸ä¼šæœ‰å¸®åŠ©ã€‚

***

## å…¶å®ƒçº¦æŸç±»å®¹å™¨
1. AspectRatioï¼šæŒ‡å®šå­ç»„ä»¶çš„é•¿å®½æ¯”ã€‚
2. LimitedBoxï¼šæŒ‡å®šæœ€å¤§å®½é«˜ã€‚
3. FractionallySizedBoxï¼šå¯ä»¥æ ¹æ®çˆ¶å®¹å™¨å®½é«˜çš„ç™¾åˆ†æ¯”æ¥è®¾ç½®å­ç»„ä»¶å®½é«˜ã€‚
4. ...



