## Widget æ¥å£
åœ¨ Flutter ä¸­ï¼Œ widget çš„åŠŸèƒ½æ˜¯â€œæè¿°ä¸€ä¸ªUIå…ƒç´ çš„é…ç½®ä¿¡æ¯â€ã€‚
``` dart
/// @immutable ä»£è¡¨ Widget æ˜¯ä¸å¯å˜çš„ï¼Œ
/// è¿™ä¼šé™åˆ¶ Widget ä¸­å®šä¹‰çš„å±æ€§ï¼ˆå³é…ç½®ä¿¡æ¯ï¼‰å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼ˆfinalï¼‰ï¼Œ
/// =========================================================
/// ğŸ’¡ ä¸ºä»€ä¹ˆä¸å…è®¸ Widget ä¸­å®šä¹‰çš„å±æ€§å˜åŒ–å‘¢ï¼Ÿ
/// ---------------------------------------------------------
/// ğŸ“• åœ¨Flutterä¸­å¦‚æœå±æ€§å‘ç”Ÿåˆ™ä¼šé‡æ–°æ„å»ºWidgetæ ‘ï¼Œ
/// å³é‡æ–°åˆ›å»ºæ–°çš„ Widget å®ä¾‹æ¥æ›¿æ¢æ—§çš„ Widget å®ä¾‹ï¼Œ
/// æ‰€ä»¥å…è®¸ Widget çš„å±æ€§å˜åŒ–æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œ
/// å› ä¸ºä¸€æ—¦ Widget è‡ªå·±çš„å±æ€§å˜äº†è‡ªå·±å°±ä¼šè¢«æ›¿æ¢ã€‚
/// è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Widget ä¸­å®šä¹‰çš„å±æ€§å¿…é¡»æ˜¯ final çš„åŸå› ã€‚
/// =========================================================
///
/// DiagnosticableTreeå³â€œè¯Šæ–­æ ‘â€ï¼Œä¸»è¦ä½œç”¨æ˜¯æä¾›è°ƒè¯•ä¿¡æ¯ã€‚
@immutable
abstract class Widget extends DiagnosticableTree {

  const Widget({ this.key });
  
  /// keyçš„ä¸»è¦çš„ä½œç”¨æ˜¯å†³å®šæ˜¯å¦åœ¨ä¸‹ä¸€æ¬¡buildæ—¶å¤ç”¨æ—§çš„ widget ï¼Œ
  /// å†³å®šçš„æ¡ä»¶åœ¨canUpdate()æ–¹æ³•ä¸­
  final Key? key;
  
  /// æ­£å¦‚å‰æ–‡æ‰€è¿°â€œä¸€ä¸ª widget å¯ä»¥å¯¹åº”å¤šä¸ªElementâ€ï¼›
  /// Flutter æ¡†æ¶åœ¨æ„å»ºUIæ ‘æ—¶ï¼Œä¼šå…ˆè°ƒç”¨æ­¤æ–¹æ³•ç”Ÿæˆå¯¹åº”èŠ‚ç‚¹çš„Elementå¯¹è±¡ã€‚
  /// æ­¤æ–¹æ³•æ˜¯ Flutter æ¡†æ¶éšå¼è°ƒç”¨çš„ï¼Œåœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­åŸºæœ¬ä¸ä¼šè°ƒç”¨åˆ°ã€‚
  @protected
  @factory
  Element createElement();

  @override
  String toStringShort() {
    final String type = objectRuntimeType(this, 'Widget');
    return key == null ? type : '$type-$key';
  }
  
  /// å¤å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œä¸»è¦æ˜¯è®¾ç½®è¯Šæ–­æ ‘çš„ä¸€äº›ç‰¹æ€§
  @override
  void debugFillProperties(DiagnosticPropertiesBuilder properties) {
    super.debugFillProperties(properties);
    properties.defaultDiagnosticsTreeStyle = DiagnosticsTreeStyle.dense;
  }

  @override
  @nonVirtual
  bool operator ==(Object other) => super == other;

  @override
  @nonVirtual
  int get hashCode => super.hashCode;
  
  /// é™æ€æ–¹æ³•ï¼Œ
  /// ä¸»è¦ç”¨äºåœ¨ widget æ ‘é‡æ–°buildæ—¶å¤ç”¨æ—§çš„ widget ï¼Œ
  /// ----------------------------------------------------
  /// å…·ä½“æ¥è¯´åº”è¯¥æ˜¯ï¼šæ˜¯å¦ç”¨æ–°çš„ widget å¯¹è±¡å»æ›´æ–°æ—§UIæ ‘ä¸Šæ‰€å¯¹åº”çš„Elementå¯¹è±¡çš„é…ç½®ï¼›
  /// 
  /// é€šè¿‡å…¶æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªè¦newWidgetä¸oldWidgetçš„runtimeTypeå’ŒkeyåŒæ—¶ç›¸ç­‰æ—¶,
  /// å°±ä¼šç”¨new widgetå»æ›´æ–°Elementå¯¹è±¡çš„é…ç½®ï¼Œå¦åˆ™å°±ä¼šåˆ›å»ºæ–°çš„Elementã€‚
  static bool canUpdate(Widget oldWidget, Widget newWidget) {
    return oldWidget.runtimeType == newWidget.runtimeType
        && oldWidget.key == newWidget.key;
  }
  ...
}
```